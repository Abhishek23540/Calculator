<!DOCTYPE html>
<!-- saved from url=(0036)http://127.0.0.1:5500/calculator.htm -->
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Calculator — HTML/CSS/JS</title>
  <style>
    :root{
      --bg:#0f1724;
      --panel:#0b1220;
      --accent:#7c5cff;
      --muted:#95a0b8;
      --glass: rgba(255,255,255,0.03);
      --radius:14px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      background: linear-gradient(180deg,#071025 0%, #091627 100%);
      display:flex;align-items:center;justify-content:center;padding:32px;color:#e6eef8;
    }

    .calculator{
      width:380px;max-width:95vw;padding:18px;border-radius:18px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));box-shadow: 0 8px 30px rgba(2,6,23,0.7);
    }

    .screen{
      background:var(--panel);border-radius:12px;padding:18px;margin-bottom:14px;display:flex;flex-direction:column;gap:6px;
    }
    .expression{
      font-size:20px;color:var(--muted);min-height:22px;word-break:break-all;
    }
    .result{
      font-size:34px;font-weight:700;color:#fff;min-height:40px;text-align:right;overflow:auto;
    }

    .keys{display:grid;grid-template-columns:repeat(4,1fr);gap:12px}
    button.key{
      padding:18px;border-radius:12px;border:0;background:var(--glass);color:var(--muted);font-size:18px;cursor:pointer;user-select:none;box-shadow:inset 0 -2px 0 rgba(0,0,0,0.2);
      transition:all .12s ease;backface-visibility:hidden;
    }
    button.key:active{transform:translateY(2px) scale(0.995);}

    button.op{background:linear-gradient(180deg,var(--accent), #6248d9);color:white;font-weight:600}
    button.equals{grid-column:span 2;background:linear-gradient(180deg,#10b981,#059669);color:white;font-weight:700}
    button.clear{background:linear-gradient(180deg,#ef4444,#dc2626);color:white}
    button.wide{grid-column:span 2}

    .footer{margin-top:12px;font-size:13px;color:var(--muted);display:flex;justify-content:space-between;align-items:center}
    .kbd{background:rgba(255,255,255,0.03);padding:6px 10px;border-radius:8px}

    @media (max-width:420px){.calculator{padding:14px}}
  </style>
</head>
<body>
  <main class="calculator" role="application" aria-label="Calculator">
    <div class="screen" aria-live="polite">
      <div id="expression" class="expression" aria-hidden="false">0</div>
      <div id="result" class="result" aria-atomic="true">0</div>
    </div>

    <div class="keys">
      <button class="key clear" data-action="clear" title="Clear (Esc)">C</button>
      <button class="key" data-action="back" title="Backspace (Backspace)">⌫</button>
      <button class="key" data-value="(" title="Left parenthesis">(</button>
      <button class="key" data-value=")" title="Right parenthesis">)</button>

      <button class="key" data-value="7">7</button>
      <button class="key" data-value="8">8</button>
      <button class="key" data-value="9">9</button>
      <button class="key op" data-value="/" title="Divide">÷</button>

      <button class="key" data-value="4">4</button>
      <button class="key" data-value="5">5</button>
      <button class="key" data-value="6">6</button>
      <button class="key op" data-value="*" title="Multiply">×</button>

      <button class="key" data-value="1">1</button>
      <button class="key" data-value="2">2</button>
      <button class="key" data-value="3">3</button>
      <button class="key op" data-value="-" title="Minus">−</button>

      <button class="key wide" data-value="0">0</button>
      <button class="key" data-value=".">.</button>
      <button class="key op" data-value="+" title="Plus">+</button>

      <button class="key equals" data-action="equals" title="Equals (Enter)">=</button>
    </div>

    <div class="footer">
      <div>Real-time result · Keyboard supported</div>
      <div class="kbd">Enter =, Esc C, Backspace ⌫</div>
    </div>
  </main>

  <script>
    // Simple but careful evaluator: allow only digits, operators, parentheses, decimal, and spaces
    const allowedRe = /^[0-9+\-*/().\s]*$/;

    const expressionEl = document.getElementById('expression');
    const resultEl = document.getElementById('result');

    let expression = '';

    function setExpression(next){
      expression = next.trim();
      if(expression === '') expressionEl.textContent = '0';
      else expressionEl.textContent = expression;
      updateResult();
    }

    function append(char){
      // avoid leading zeros like 00 — allow user freedom but keep simple
      expression += char;
      setExpression(expression);
    }

    function clearAll(){ expression = ''; setExpression(''); resultEl.textContent = '0'; }
    function backspace(){ expression = expression.slice(0,-1); setExpression(expression); }

    function sanitize(expr){
      // Replace Unicode operators for display-friendly characters
      expr = expr.replace(/÷/g, '/').replace(/×/g, '*').replace(/−/g, '-');
      return expr;
    }

    function evaluateExpression(expr){
      expr = sanitize(expr);
      // quick validation: only allowed characters
      if(!allowedRe.test(expr)) throw new Error('Invalid characters');
      // prevent expressions that are obviously invalid (like starting with * or /)
      if(/^[*/]/.test(expr)) throw new Error('Invalid start');
      // Use Function to evaluate math expression rather than eval; still limited by regex above
      // Wrap in parentheses to avoid ASI pitfalls
      const fn = new Function('return (' + expr + ')');
      return fn();
    }

    function updateResult(){
      if(expression.trim() === ''){ resultEl.textContent = '0'; return; }
      try{
        const value = evaluateExpression(expression);
        if(typeof value === 'number' && isFinite(value)){
          // show rounded result for long decimals
          const pretty = Number.isInteger(value) ? value.toString() : Number(value.toPrecision(12)).toString();
          resultEl.textContent = pretty;
        } else {
          resultEl.textContent = 'Error';
        }
      } catch (e){
        resultEl.textContent = '—'; // indicate incomplete or invalid expression
      }
    }

    // Handle button clicks
    document.querySelectorAll('button.key').forEach(btn => {
      btn.addEventListener('click', () => {
        const v = btn.dataset.value;
        const action = btn.dataset.action;
        if(action === 'clear') return clearAll();
        if(action === 'back') return backspace();
        if(action === 'equals'){
          try{
            const val = evaluateExpression(expression);
            expression = (Number.isFinite(val) ? (Number.isInteger(val) ? String(val) : String(Number(val.toPrecision(12)))) : '');
            setExpression(expression);
            // brief highlight when equals pressed
            resultEl.animate([{transform:'scale(1)'},{transform:'scale(1.02)'}],{duration:120,iterations:1});
          }catch(e){
            resultEl.textContent = 'Error';
          }
          return;
        }
        // regular value
        if(v) append(v);
      });
    });

    // Keyboard support
    window.addEventListener('keydown', (ev)=>{
      const key = ev.key;
      // map common keys
      if(key === 'Enter'){
        ev.preventDefault(); document.querySelector('[data-action="equals"]').click();
        return;
      }
      if(key === 'Escape') { ev.preventDefault(); clearAll(); return; }
      if(key === 'Backspace') { ev.preventDefault(); backspace(); return; }
      // Accept digits, operators and parentheses
      if(/^[0-9]$/.test(key) || ['+','-','*','/','(',')','.'].includes(key)){
        ev.preventDefault(); append(key);
        return;
      }
      // also map printable × ÷ and − from numpad? handle × and ÷ characters
      if(key === '×' || key === '÷' || key === '−'){
        ev.preventDefault(); append(key);
      }
    });

    // Allow clicks on expression to copy result
    expressionEl.addEventListener('dblclick', ()=>{
      navigator.clipboard?.writeText(expression || resultEl.textContent).then(()=>{
        // tiny visual feedback
        expressionEl.animate([{opacity:1},{opacity:0.6},{opacity:1}],{duration:400});
      }).catch(()=>{});
    });

    // Init
    setExpression('');
  </script>
<!-- Code injected by live-server -->
<script>
	// <![CDATA[  <-- For SVG support
	if ('WebSocket' in window) {
		(function () {
			function refreshCSS() {
				var sheets = [].slice.call(document.getElementsByTagName("link"));
				var head = document.getElementsByTagName("head")[0];
				for (var i = 0; i < sheets.length; ++i) {
					var elem = sheets[i];
					var parent = elem.parentElement || head;
					parent.removeChild(elem);
					var rel = elem.rel;
					if (elem.href && typeof rel != "string" || rel.length == 0 || rel.toLowerCase() == "stylesheet") {
						var url = elem.href.replace(/(&|\?)_cacheOverride=\d+/, '');
						elem.href = url + (url.indexOf('?') >= 0 ? '&' : '?') + '_cacheOverride=' + (new Date().valueOf());
					}
					parent.appendChild(elem);
				}
			}
			var protocol = window.location.protocol === 'http:' ? 'ws://' : 'wss://';
			var address = protocol + window.location.host + window.location.pathname + '/ws';
			var socket = new WebSocket(address);
			socket.onmessage = function (msg) {
				if (msg.data == 'reload') window.location.reload();
				else if (msg.data == 'refreshcss') refreshCSS();
			};
			if (sessionStorage && !sessionStorage.getItem('IsThisFirstTime_Log_From_LiveServer')) {
				console.log('Live reload enabled.');
				sessionStorage.setItem('IsThisFirstTime_Log_From_LiveServer', true);
			}
		})();
	}
	else {
		console.error('Upgrade your browser. This Browser is NOT supported WebSocket for Live-Reloading.');
	}
	// ]]>
</script>


</body></html>